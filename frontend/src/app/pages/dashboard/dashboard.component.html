<div class="dashboard-container">
  <div class="video-background">
    <video autoplay muted loop playsinline>
      <source src="https://assets.mixkit.co/videos/preview/mixkit-highway-traffic-at-night-4034-large.mp4"
        type="video/mp4">
    </video>
    <div class="video-overlay"></div>
  </div>

  <div class="container relative z-10">
    <!-- Header -->
    <div class="dashboard-header animate-fade-up">
      <h1 class="page-title text-gradient">Command Center</h1>
      <p class="page-subtitle">Real-time automotive analytics</p>
    </div>

    <!-- Stats Overview -->
    <div class="stats-overview" *ngIf="!loading && stats">
      <div class="stat-card glass-card animate-fade-up" style="animation-delay: 0.1s">
        <div class="stat-icon text-neon">üöó</div>
        <div class="stat-value">{{ stats.totalCars }}</div>
        <div class="stat-label">Total Fleet</div>
      </div>
      <div class="stat-card glass-card animate-fade-up" style="animation-delay: 0.2s">
        <div class="stat-icon text-neon">üè≠</div>
        <div class="stat-value">{{ stats.totalBrands }}</div>
        <div class="stat-label">Manufacturers</div>
      </div>
      <div class="stat-card glass-card animate-fade-up" style="animation-delay: 0.3s">
        <div class="stat-icon text-neon">üìä</div>
        <div class="stat-value">{{ stats.totalTypes }}</div>
        <div class="stat-label">Segments</div>
      </div>
      <div class="stat-card glass-card animate-fade-up" style="animation-delay: 0.4s">
        <div class="stat-icon text-neon">‚ö°</div>
        <div class="stat-value">{{ stats.averagePerformanceRating.toFixed(1) }}</div>
        <div class="stat-label">Avg Performance</div>
      </div>
    </div>

    <!-- Charts Grid -->
    <div class="charts-grid" *ngIf="!loading">
      <!-- Horsepower Trends -->
      <div class="chart-card glass-card animate-fade-up" style="animation-delay: 0.5s">
        <h2 class="chart-title">Power Analytics</h2>
        <div class="chart-container">
          <canvas baseChart *ngIf="horsepowerChartData" [data]="horsepowerChartData" [type]="'line'"
            [options]="lineChartOptions">
          </canvas>
        </div>
      </div>

      <!-- Type Distribution -->
      <div class="chart-card glass-card animate-fade-up" style="animation-delay: 0.6s">
        <h2 class="chart-title">Fleet Composition</h2>
        <div class="chart-container">
          <canvas baseChart *ngIf="typeChartData" [data]="typeChartData" [type]="'pie'" [options]="pieChartOptions">
          </canvas>
        </div>
      </div>

      <!-- Sales by Year -->
      <div class="chart-card glass-card animate-fade-up" style="animation-delay: 0.7s">
        <h2 class="chart-title">Model Year Distribution</h2>
        <div class="chart-container">
          <canvas baseChart *ngIf="salesChartData" [data]="salesChartData" [type]="'bar'" [options]="barChartOptions">
          </canvas>
        </div>
      </div>

      <!-- Performance Gauge -->
      <div class="chart-card glass-card animate-fade-up" style="animation-delay: 0.8s">
        <h2 class="chart-title">Performance Index</h2>
        <div class="gauge-container">
          <div class="gauge">
            <div class="gauge-ring"></div>
            <div class="gauge-value text-neon">{{ performanceRating.toFixed(1) }}</div>
            <div class="gauge-label">RATING</div>
            <div class="gauge-bar-container">
              <div class="gauge-bar-fill" [style.width.%]="(performanceRating / 10) * 100"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Loading State -->
    <app-loading *ngIf="loading"></app-loading>
  </div>
</div>